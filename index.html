<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Fantastic Ten">
    <link rel="apple-touch-icon" href="favicon.png">
    <link rel="icon" type="image/png" href="favicon.png">
    <title>Counting in Tens App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f8ff;
            color: #333;
            margin: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        h1 {
            color: #ff6347;
            margin: 20px 0;
        }
        #container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin: 20px auto;
            max-width: 800px;
        }
        #tens, #ones {
            border: 2px solid #87ceeb;
            padding: 10px;
            margin: 10px;
            min-height: 200px;
            width: 300px;
            display: flex;
            flex-wrap: wrap;
            align-content: flex-start;
        }
        #tens {
            background-color: #ffe4b5;
        }
        #ones {
            background-color: #90ee90;
        }
        .item {
            width: 40px;
            height: 40px;
            background-color: #ff4500;
            border-radius: 50%;
            margin: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
        .small {
            width: 20px;
            height: 20px;
            background-color: #ffffff;
            color: #1e90ff;
            cursor: default;
        }
        .ten-group {
            width: 100%;
            height: 50px;
            background-color: #1e90ff;
            margin: 10px 0;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-radius: 10px;
            padding: 5px;
            box-sizing: border-box;
        }
        button {
            font-size: 18px;
            padding: 10px 20px;
            margin: 10px;
            background-color: #32cd32;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #228b22;
        }
        #total {
            font-size: 24px;
            margin: 20px 0;
            color: #ff6347;
        }
        #instructions {
            font-size: 16px;
            margin: 20px;
            color: #555;
        }
        #apples {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px auto;
            max-width: 800px;
            border: 2px dashed #87ceeb;
            padding: 10px;
            background-color: #f5f5f5;
        }
        #input-container {
            margin: 20px;
        }
        input[type="number"] {
            font-size: 18px;
            padding: 10px;
            width: 100px;
        }
        #feedback {
            font-size: 18px;
            margin: 10px;
            color: #ff6347;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        .highlight {
            animation: pulse 1s infinite;
        }
        #confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            pointer-events: none;
            z-index: 10;
        }
        .confetti {
            position: absolute;
            top: 0;
            font-size: 1.6rem;
            animation: confetti-fall linear 5s forwards;
        }
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100%) rotate(0);
            }
            100% {
                transform: translateY(100vh) rotate(180deg);
            }
        }
        #answer-area {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px auto;
            width: 100%;
            max-width: 400px;
        }
        #answer-input {
            margin-right: 20px;
        }
        #keypad {
            display: grid;
            grid-template-columns: repeat(3, 50px);
            gap: 5px;
        }
        #keypad button {
            font-size: 24px;
            padding: 10px;
            background-color: #ddd;
            color: #333;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #keypad button:hover {
            background-color: #ccc;
        }
        #keypad #enter {
            background-color: #32cd32;
            color: white;
            font-size: 18px;
            padding: 10px 20px; /* Increased padding for larger button */
            width: 80px; /* Fixed width to ensure text fits */
            text-align: center;
        }
        #keypad #enter:hover {
            background-color: #228b22;
        }
    </style>
</head>
<body>
    <h1>Learn Counting in Groups of 10s!</h1>
    <p id="instructions">Hi kiddo! Count the fruits, group them into tens by clicking the pulsing fruit, and move the rest to ones. When all fruits are in baskets, use the keypad to enter how many fruits there are!</p>
    
    <div id="input-container">
        <button onclick="generateFruits()">New Fruits</button>
        <button onclick="reset()">Reset</button>
        <p id="feedback"></p>
    </div>
    
    <div id="apples"></div>
    
    <div id="container">
        <div id="tens">
            <h2>Tens (Baskets)</h2>
        </div>
        <div id="ones">
            <h2>Ones (Fruits)</h2>
        </div>
    </div>
    
    <div id="answer-area">
        <div id="answer-input">
            <label for="answer">How many fruits? </label>
            <input type="number" id="answer" min="1" max="99" placeholder="1-99" disabled>
        </div>
        <div id="keypad">
            <button onclick="appendNumber('7')">7</button>
            <button onclick="appendNumber('8')">8</button>
            <button onclick="appendNumber('9')">9</button>
            <button onclick="appendNumber('4')">4</button>
            <button onclick="appendNumber('5')">5</button>
            <button onclick="appendNumber('6')">6</button>
            <button onclick="appendNumber('1')">1</button>
            <button onclick="appendNumber('2')">2</button>
            <button onclick="appendNumber('3')">3</button>
            <button onclick="backspace()">‚Üê</button>
            <button onclick="appendNumber('0')">0</button>
            <button id="enter" onclick="checkAnswer()">Enter</button>
        </div>
    </div>
    
    <p id="total">Total: ?</p>
    
    <audio id="applause" src="app-5.mp3"></audio>
    
    <div id="confetti"></div>

    <script>
        const fruits = ['üçé', 'üçä', 'ü•≠', 'üçå', 'üçâ', 'üçá'];
        let totalFruits = 0;
        let currentFruit = '';

        function generateFruits() {
            totalFruits = Math.floor(Math.random() * 99) + 1;
            currentFruit = fruits[Math.floor(Math.random() * fruits.length)];
            reset();
            document.getElementById('total').textContent = `Total: ?`;
            const fruitsDiv = document.getElementById('apples');
            for (let i = 1; i <= totalFruits; i++) {
                const item = document.createElement('div');
                item.className = 'item';
                item.textContent = currentFruit;
                fruitsDiv.appendChild(item);
            }
            updateHighlights();
        }

        function appendNumber(num) {
            const answer = document.getElementById('answer');
            if (answer.disabled) return;
            answer.value += num;
        }

        function backspace() {
            const answer = document.getElementById('answer');
            if (answer.disabled) return;
            answer.value = answer.value.slice(0, -1);
        }

        function checkAnswer() {
            const answer = document.getElementById('answer');
            if (answer.disabled) return;
            const userAnswer = parseInt(answer.value);
            const feedback = document.getElementById('feedback');
            if (isNaN(userAnswer) || userAnswer < 1 || userAnswer > 99) {
                feedback.textContent = 'Please enter a number between 1 and 99.';
                return;
            }
            if (userAnswer === totalFruits) {
                feedback.textContent = 'Yay! Correct!';
                document.getElementById('total').textContent = `Total: ${totalFruits}`;
                applaud();
            } else {
                feedback.textContent = `Oops! Try again.`;
            }
        }

        function groupTen() {
            const fruitsDiv = document.getElementById('apples');
            const group = document.createElement('div');
            group.className = 'ten-group';
            for (let j = 0; j < 10; j++) {
                const fruit = fruitsDiv.firstChild;
                if (fruit) {
                    fruitsDiv.removeChild(fruit);
                    fruit.classList.add('small');
                    fruit.classList.remove('highlight');
                    fruit.onclick = null;
                    group.appendChild(fruit);
                }
            }
            document.getElementById('tens').appendChild(group);
            updateHighlights();
        }

        function moveToOnes(fruit) {
            const onesDiv = document.getElementById('ones');
            const fruitsDiv = document.getElementById('apples');
            fruitsDiv.removeChild(fruit);
            fruit.onclick = null;
            onesDiv.appendChild(fruit);
            updateHighlights();
        }

        function updateHighlights() {
            const fruitsDiv = document.getElementById('apples');
            const children = fruitsDiv.children;
            for (let child of children) {
                child.classList.remove('highlight');
                child.onclick = null;
            }
            if (children.length >= 10) {
                const tenth = children[9];
                tenth.classList.add('highlight');
                tenth.onclick = groupTen;
            } else {
                for (let child of children) {
                    child.onclick = () => moveToOnes(child);
                }
            }
            if (children.length === 0) {
                document.getElementById('answer').disabled = false;
            }
        }

        function reset() {
            document.getElementById('apples').innerHTML = '';
            document.getElementById('tens').innerHTML = '<h2>Tens (Baskets)</h2>';
            document.getElementById('ones').innerHTML = '<h2>Ones (Fruits)</h2>';
            document.getElementById('total').textContent = 'Total: ?';
            document.getElementById('answer').value = '';
            document.getElementById('answer').disabled = true;
            document.getElementById('feedback').textContent = '';
            document.getElementById('confetti').innerHTML = '';
        }

        function applaud() {
            document.getElementById('applause').play();
            confettiBurst();
        }

        const confettiContainer = document.getElementById('confetti');

        function showConfetti() {
            const confetti = document.createElement('div');
            confetti.textContent = 'üéâ';
            confetti.classList.add('confetti');
            confetti.style.left = Math.random() * window.innerWidth + 'px';
            confettiContainer.appendChild(confetti);
            setTimeout(() => {
                confetti.remove();
            }, 5000);
        }

        function confettiBurst() {
            for (let i = 0; i < 50; i++) {
                setTimeout(showConfetti, i * 50);
            }
        }

        // Generate fruits on page load
        generateFruits();
    </script>
</body>
</html>